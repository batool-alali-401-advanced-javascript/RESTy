(this.webpackJsonpresty=this.webpackJsonpresty||[]).push([[0],{20:function(e,t,a){},26:function(e,t,a){e.exports=a(40)},32:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(22),i=a.n(s),c=a(3),l=a.n(c),u=a(18),o=a(7),h=a(10),m=a(11),d=a(14),p=a(13),y=a(12),f=a(1);var v=function(e){return e.condition?n.a.createElement(n.a.Fragment,null,e.children):null};a(32);var E=function(e){function t(t){if("Enter"===t.key||t.target&&"Submit"===t.target.value){var a=document.querySelector(".selected-req"),r=document.querySelector(".reqBody-textbox");e.onSubmit(a.value,r.value)}}function a(t){var a=document.querySelector(".selected-req");a&&a.classList.remove("selected-req"),t.target.classList.add("selected-req"),e.onClick(t.target.value)}return n.a.createElement(v,{condition:e},n.a.createElement("div",{className:"form"},n.a.createElement("div",{className:"form-input"},n.a.createElement("div",{className:"req-type"},n.a.createElement("button",{value:"GET",className:"selected-req",id:"get-btn",onClick:a},"GET"),n.a.createElement("button",{value:"POST",id:"post-btn",onClick:a},"POST"),n.a.createElement("button",{value:"PUT",id:"put-btn",onClick:a},"PUT"),n.a.createElement("button",{value:"PATCH",id:"patch-btn",onClick:a},"PATCH"),n.a.createElement("button",{value:"DELETE",id:"delete-btn",onClick:a},"DELETE")),n.a.createElement("div",{className:"form-child"},n.a.createElement("label",null,e.label),n.a.createElement("input",{className:"url-textbox",name:"url-textbox",type:e.type,value:e.value,onChange:function(t){e.onChange(t.target.value)},onKeyPress:t}),n.a.createElement("button",{value:"Submit",className:"submit-btn",onClick:t},"Submit")),n.a.createElement("div",{className:"form-child"},n.a.createElement("label",null,"Body"),n.a.createElement("textarea",{className:"reqBody-textbox",name:"reqBody-textbox",onChange:function(t){e.onReqBoxChange(t.target.value)}})))))};a(20);var b=function(e){for(var t=[],a=0;a<e.links.length;a++)t.push(n.a.createElement("li",{key:a},n.a.createElement(y.b,{to:e.links[a].url},e.links[a].displayName)));return n.a.createElement("nav",{className:e.className},n.a.createElement("ul",null,t))};function q(){return n.a.createElement("div",{className:"headerDiv"},n.a.createElement("h1",{className:"title"},"RESTy"),n.a.createElement(b,{links:[{displayName:"Home",url:"/"},{displayName:"History",url:"/history"}],className:"top-navbar"}))}a(38);var x=function(){return n.a.createElement("div",{className:"footer"},n.a.createElement("p",{className:"copyRight"}," \xa9 2020 Batool Al-Ali"))},k=a(24),g=a.n(k),T=a(25),N=a.n(T);function S(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Results: "),n.a.createElement("span",null,n.a.createElement(g.a,{data:e.output,theme:N.a})))}var w=function(e){for(var t=[],a=e.selectedIndex,r=0;r<e.history.length;r++){var s=e.history[r];t.push(n.a.createElement("li",{key:r,value:r,className:0===r&&e.selectFirst?"selected-history":null,onClick:i},s.reqType," ",s.url))}function i(t){var r=document.querySelector(".selected-history");r&&r.classList.remove("selected-history"),t.target.classList.add("selected-history"),a=t.target.value,e.showFetchDetails&&e.showFetchDetails(a)}return n.a.createElement(v,{condition:e},n.a.createElement("div",{className:"mini-history"},n.a.createElement("h3",null,"Previous Requests"),n.a.createElement("ul",{className:"history-list"},t)))},O=(a(39),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={historyArr:[],currDetails:e.history||{},selectedIndex:e.history&&e.history.length?0:null},r}return Object(m.a)(a,[{key:"showFetchDetails",value:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({currDetails:this.props.history[t],selectedIndex:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchPrevReq(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"content",id:"history"},n.a.createElement("h2",null,"API History"),n.a.createElement("div",{className:"big-history flex-row"},n.a.createElement(w,{history:this.props.history,showFetchDetails:this.showFetchDetails.bind(this),onSubmit:this.handleSubmit.bind(this),selectedIndex:this.state.selectedIndex,selectFirst:!0})))}}]),a}(n.a.Component)),j=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={headers:{},count:0,results:[],url:"",reqType:"GET",reqBody:null,output:{},loading:!1,history:[]},r}return Object(m.a)(a,[{key:"apiFetch",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,a,r,n,s,i,c,o,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.url)){e.next=33;break}return e.prev=2,this.setState({loading:!0}),e.next=6,fetch(t,{method:this.state.reqType,headers:{"Content-Type":"application/json"},body:"GET"===this.state.reqType||"DELETE"===this.state.reqType?null:JSON.stringify(JSON.parse(this.state.reqBody))});case 6:if(!(a=e.sent)){e.next=21;break}return e.next=10,a.json();case 10:r=e.sent,n={},s=Object(u.a)(a.headers.entries());try{for(s.s();!(i=s.n()).done;)c=i.value,n[c[0]]=c[1]}catch(l){s.e(l)}finally{s.f()}return e.next=16,this.setState({results:r.results||r,count:r.count||1,headers:n});case 16:if(!this.state.results.error){e.next=18;break}throw new Error("500 error");case 18:o={headers:this.state.headers,results:this.state.results,count:this.state.count,url:t,reqType:this.state.reqType,reqBody:this.state.reqBody},this.updateHistory(o),this.setState({output:o});case 21:e.next=30;break;case 23:e.prev=23,e.t0=e.catch(2),console.error("Error: could not perform operation.",e.t0.message),(h="500 error"===e.t0.message?this.state.results:{error:"could not perform operation",message:e.t0.message}).url=t,h.reqType=this.state.reqType,this.setState({output:h});case 30:return e.prev=30,this.setState({loading:!1}),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[2,23,30,33]])})));return function(){return e.apply(this,arguments)}}()},{key:"updateURL",value:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({url:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateReqType",value:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({reqType:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateReqBody",value:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({reqBody:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPrevReq",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.state.history[t])){e.next=6;break}return e.next=4,this.setState({url:a.url,reqType:a.reqType,reqBody:a.reqBody});case 4:return e.next=6,this.apiFetch();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithForm",value:function(){var e=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({reqType:t,reqBody:"GET"===t||"DELETE"===t?null:a});case 2:return e.next=4,this.apiFetch();case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateHistory",value:function(e){var t,a=Object(u.a)(this.state.history);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.url===e.url&&r.reqType===e.reqType&&r.reqBody===e.reqBody)return}}catch(n){a.e(n)}finally{a.f()}this.state.history.push(e)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(q,null),n.a.createElement(f.c,null,n.a.createElement(f.a,{exact:!0,path:"/"},n.a.createElement("div",{id:"resty",className:"content"},n.a.createElement(E,{className:"form-url",label:"URL",value:this.state.url,type:"text",stateKey:"url",onChange:this.updateURL.bind(this),onReqBoxChange:this.updateReqBody.bind(this),onSubmit:this.fetchWithForm.bind(this),onClick:this.updateReqType.bind(this)}),n.a.createElement("div",{className:"res-and-history flex-row"},n.a.createElement(S,{className:"results",output:this.state.output,loading:this.state.loading}),n.a.createElement(w,{history:this.state.history||[],onSubmit:this.fetchPrevReq.bind(this)})))),n.a.createElement(f.a,{exact:!0,path:"/history"},n.a.createElement(O,{history:this.state.history||[],fetchPrevReq:this.fetchPrevReq.bind(this)}))),n.a.createElement(x,null))))}}]),a}(n.a.Component);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.0f962e1f.chunk.js.map